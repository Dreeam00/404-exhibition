<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive 404</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div id="interactive-container" class="error-container interactive">
        <!-- Content will be generated by JavaScript -->
    </div>
    <a href="index.html" class="back-link">ギャラリーに戻る</a>

    <script>
        const games = [
            {
                title: "ブロック崩し",
                description: "クリックでボールの軌道を変えよう！",
                init: function(container) {
                    const canvas = document.createElement('canvas');
                    container.appendChild(canvas);
                    const ctx = canvas.getContext('2d');
                    canvas.width = 300;
                    canvas.height = 200;
                    canvas.style.backgroundColor = '#eee';

                    let x = canvas.width / 2;
                    let y = canvas.height - 30;
                    let dx = 2;
                    let dy = -2;
                    const ballRadius = 10;

                    function drawBall() {
                        ctx.beginPath();
                        ctx.arc(x, y, ballRadius, 0, Math.PI * 2);
                        ctx.fillStyle = "#0095DD";
                        ctx.fill();
                        ctx.closePath();
                    }

                    function draw() {
                        ctx.clearRect(0, 0, canvas.width, canvas.height);
                        drawBall();

                        if(x + dx > canvas.width-ballRadius || x + dx < ballRadius) {
                            dx = -dx;
                        }
                        if(y + dy > canvas.height-ballRadius || y + dy < ballRadius) {
                            dy = -dy;
                        }

                        x += dx;
                        y += dy;
                    }

                    const interval = setInterval(draw, 10);

                    canvas.addEventListener('click', () => {
                        dx = (Math.random() - 0.5) * 8;
                        dy = (Math.random() - 0.5) * 8;
                    });

                    // Cleanup interval on navigation
                    window.addEventListener('beforeunload', () => clearInterval(interval));
                }
            },
            {
                title: "図形クリッカー",
                description: "クリックで図形と色が変わるよ！",
                init: function(container) {
                    const canvas = document.createElement('canvas');
                    container.appendChild(canvas);
                    const ctx = canvas.getContext('2d');
                    canvas.width = 300;
                    canvas.height = 200;
                    canvas.style.backgroundColor = '#f9f9f9';
                    canvas.style.cursor = 'pointer';

                    const shapes = ['rect', 'circle', 'triangle'];
                    let currentShape = 0;

                    function getRandomColor() {
                        const letters = '0123456789ABCDEF';
                        let color = '#';
                        for (let i = 0; i < 6; i++) {
                            color += letters[Math.floor(Math.random() * 16)];
                        }
                        return color;
                    }

                    function drawShape() {
                        ctx.clearRect(0, 0, canvas.width, canvas.height);
                        ctx.fillStyle = getRandomColor();

                        switch(shapes[currentShape]) {
                            case 'rect':
                                ctx.fillRect(75, 50, 150, 100);
                                break;
                            case 'circle':
                                ctx.beginPath();
                                ctx.arc(150, 100, 75, 0, Math.PI * 2);
                                ctx.fill();
                                break;
                            case 'triangle':
                                ctx.beginPath();
                                ctx.moveTo(150, 50);
                                ctx.lineTo(75, 150);
                                ctx.lineTo(225, 150);
                                ctx.closePath();
                                ctx.fill();
                                break;
                        }
                    }

                    drawShape();

                    canvas.addEventListener('click', () => {
                        currentShape = (currentShape + 1) % shapes.length;
                        drawShape();
                    });
                }
            }
        ];

        const container = document.getElementById('interactive-container');

        // Select a random game
        const randomGame = games[Math.floor(Math.random() * games.length)];

        // Setup the game
        container.innerHTML = `
            <h1>404</h1>
            <p>ページが見つかりません。代わりに...</p>
            <h2>${randomGame.title}</h2>
            <p>${randomGame.description}</p>
        `;
        randomGame.init(container);

    </script>
    <div class="tour-nav-container">
        <a href="#" id="prevBtn" class="tour-nav-btn">前の展示へ</a>
        <a href="#" id="nextBtn" class="tour-nav-btn">次の展示へ</a>
    </div>

    <script>
        const tourPages = [
            "corporate_404.html", "ecommerce_404.html", "fashion_404.html", "car_404.html", "bank_404.html",
            "airline_404.html", "delivery_404.html", "gamestore_404.html", "crowdfunding_404.html", "gourmet_404.html",
            "govportal_404.html", "subbox_404.html", "invest_404.html",
            "news_404.html", "blog_404.html", "portfolio_404.html", "font_404.html", "museum_404.html",
            "photo_404.html", "journal_404.html",
            "webservice_404.html", "sns_404.html", "learning_404.html", "travel_404.html", "recipe_404.html",
            "music_404.html", "forum_404.html", "npo_404.html", "realestate_404.html", "video_404.html",
            "dating_404.html", "university_404.html", "weather_404.html", "medical_404.html", "iot_404.html",
            "stream_404.html",
            "github_404.html", "apidocs_404.html", "saas_404.html", "hosting_404.html", "government_404.html",
            "nginx_404.html", "hackernews_404.html", "web3_404.html", "research_404.html",
            "retro_404.html", "videogame_404.html", "cli_404.html", "plaintext_404.html", "teapot_404.html",
            "unavailable_503.html", "generative_404.html", "auth_404.html", "map_404.html", "sound_404.html",
            "ai_404.html", "glitch_404.html", "arcade_404.html", "abstract_404.html",
            "classic_404.html", "creative_404.html", "interactive_404.html","default_404.html"
        ];

        const currentPage = window.location.pathname.split('/').pop();
        const currentIndex = tourPages.indexOf(currentPage);

        const prevBtn = document.getElementById('prevBtn');
        const nextBtn = document.getElementById('nextBtn');

        if (currentIndex > 0) {
            prevBtn.href = tourPages[currentIndex - 1];
        } else {
            prevBtn.style.display = 'none'; // Hide if it's the first page
        }

        if (currentIndex < tourPages.length - 1) {
            nextBtn.href = tourPages[currentIndex + 1];
        } else {
            nextBtn.style.display = 'none'; // Hide if it's the last page
        }
    </script>
</body>
</html>
